webpackJsonp([2,0],[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var n=r(14),s=i(n),a=r(60),o=i(a);new s.default({el:"#app",template:"<App />",components:{App:o.default}})},function(t,e,r){var i,n;r(55),i=r(19);var s=r(73);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-2251565a",t.exports=i},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),s=i(n);r(15),e.default={find:function(t){var e={type:"track"},r=(0,s.default)(e,t),i=r.type,n=r.service,a=r.id;if(!a)throw new Error("id not defined");if(!n)throw new Error("service not defined");var o="https://api.saoirse.audio/"+i+"/"+n+"/"+a;return fetch(o).then(function(t){return t.json()})},getSpotifyTrack:function(t){var e="https://api.spotify.com/v1/tracks/"+t;return fetch(e).then(function(t){return t.json()})},getItunesTrack:function(t){var e="https://cors.dokku.website/itunes.apple.com/lookup?id="+t+"&entity=musicTrack";return fetch(e).then(function(t){return t.json()})}}},,,,,function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),s=i(n),a=new s.default;e.default=a},,,,,,,,,function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(64),s=i(n),a=r(65),o=i(a);e.default={components:{SearchBar:s.default,SearchResults:o.default}}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),s=i(n);e.default={components:{ServiceError:s.default},props:["id"],computed:{src:function(){return"//tools.applemusic.com/embed/v1/song/"+this.id+"?country=us"},validId:function(){return!this.id||"N/A"!==this.id}}}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),s=i(n);e.default={components:{ServiceError:s.default},props:["id"],computed:{src:function(){return"https://www.deezer.com/plugins/player?format=classic&autoplay=false&playlist=true&width=700&height=350&color=007FEB&layout=dark&size=medium&type=tracks&id="+this.id+"&app_id=1"},validId:function(){return!this.id||"N/A"!==this.id}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["service"]}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),s=i(n);e.default={components:{ServiceError:s.default},props:["id"],computed:{src:function(){return"https://open.spotify.com/embed/track/"+this.id},validId:function(){return!this.id||"N/A"!==this.id}}}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),s=i(n);e.default={components:{ServiceError:s.default},props:["id"],computed:{validId:function(){return!this.id||"N/A"!==this.id},src:function(){return"https://embed.tidal.com/v0.6.11/index.html?pid=0&type=t&id="+this.id+"&relatedId=&token=&custom="}}}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),r(15);var n=r(2),s=i(n),a=r(66),o=i(a),u="pause",d="play_arrow";e.default={props:["title"],components:{Spectrum:o.default},data:function(){return{currentPlayButtonIcon:"play_arrow",progressPercent:100,artistList:void 0,imageSourceSet:void 0,backgroundSrc:void 0,songName:void 0,spotifyId:void 0,audio:document.createElement("audio"),loading:!1,playing:!1}},methods:{toggleAudioPlayback:function(){this.audio.paused?this.audio.play():this.audio.pause()},updateStates:function(){this.currentPlayButtonIcon=this.audio.paused?d:u,this.audio.paused?(this.playing=!1,this.$refs.spectrum.stopVisuals()):(this.playing=!0,this.$refs.spectrum.startVisuals())},progessUpdate:function(){var t=this.audio,e=t.currentTime,r=t.duration,i=e/r*100;this.progressPercent=i},updateContent:function(){var t=this,e=!this.title,r=this.songName&&this.title===this.spotifyId;e||r||(this.loading=!0,this.playing=!1,this.$refs.spectrum.stopVisuals(),this.audio.pause(),s.default.getSpotifyTrack(this.title).then(function(e){return t.songName=e.name,t.spotifyId=t.title,t.artistList=e.artists.map(function(t){return t.name}).join(", "),t.imageSourceSet=e.album.images.map(function(t){return t.url+" "+t.width+"w"}).join(", "),t.backgroundSrc=e.album.images[e.album.images.length-1].url,fetch(e.preview_url)}).then(function(t){return t.blob()}).then(function(e){t.currentPlayButtonIcon=d,t.progressPercent=100,t.audio.src=URL.createObjectURL(e),t.loading=!1}))}},computed:{progressStyle:function(){var t=Math.abs(100-this.progressPercent);return"transform: translateX(-"+t+"%)"},classes:function t(){var e=[];this.loading?e.push("loading"):this.playing&&e.push("playing");var t=" "+e.join(" ");return"result-card"+t},backgroundClasses:function(){var t=this.audio.paused?" playing":"";return"background"+t}},mounted:function(){var t=this;this.audio.preload=!0,this.audio.onplay=this.updateStates,this.audio.onpause=this.updateStates,this.audio.ontimeupdate=this.progessUpdate,this.updateContent(),this.$watch("title",function(){return t.updateContent()})}}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),s=i(n),a=r(7),o=i(a);e.default={data:function(){return{service:"spotify",id:"",services:[{name:"Spotify",value:"spotify"},{name:"TIDAL",value:"tidal"},{name:"Apple Music / iTunes",value:"itunes"},{name:"Deezer",value:"deezer"},{name:"ISRC",value:"isrc"}]}},methods:{parseLocationHash:function(){var t=["spotify","isrc","itunes","apple-music","tidal","isrc","deezer"],e=["track"];if(document.location.pathname&&document.location.pathname.indexOf("/")!==-1){var r=document.location.pathname.split("/"),i=r[1],n=r[2],s=r[3],a=t.indexOf(n)!==-1,o=e.indexOf(i)!==-1;"apple-music"===n&&(n="itunes"),a&&o&&this.find({service:n,id:s})}},find:function(t){var e=this;s.default.find(t).then(function(r){if(r.Code&&"404"===r.Code)return void alert("["+r.Code+"] "+r.Message);var i=t.service,n=t.id;n&&""!==n&&window.history.pushState({service:i,id:n},"/track/"+i+"/"+n,"/track/"+i+"/"+n),e.service=i,e.id=n,o.default.$emit("update-search-result",r)})},search:function(t){t.preventDefault(),this.find(this)}},mounted:function(){this.parseLocationHash()}}},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),s=i(n),a=r(63),o=i(a),u=r(61),d=i(u),c=r(68),l=i(c),f=r(67),h=i(f),p=r(62),v=i(p),_=r(7),m=i(_),y=r(2),g=i(y);e.default={components:{SaoirsePreview:o.default,AppleMusicEmbed:d.default,TidalEmbed:l.default,SpotifyEmbed:h.default,DeezerEmbed:v.default},data:function(){return{search:void 0,tidalUrl:"",spotifyUrl:"",deezerUrl:"",itunesUrl:""}},methods:{updateSearchResult:function(t){var e=this;this.search=(0,s.default)({},this.search,t);var r=this.search,i=r.tidal_id,n=r.spotify_id,a=r.deezer_id,o=r.itunes_id;this.itunesUrl="",g.default.getItunesTrack(o).then(function(t){e.itunesUrl=t.results[0].trackViewUrl}),this.tidalUrl="https://listen.tidal.com/track/"+i+"?play=true",this.spotifyUrl="https://play.spotify.com/track/"+n+"?play=true",this.deezerUrl="https://www.deezer.com/track/"+a}},mounted:function(){m.default.$on("update-search-result",this.updateSearchResult)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={min:5,max:0,get:function(t,e,i){var n=r.max,s=r.min;return t=.45*e,(n-s)*(i-t)/(e-t)+s}},i=void 0,n=void 0,s=void 0,a=void 0,o=void 0,u=void 0,d=void 0;e.default={props:["audioElement"],methods:{startVisuals:function(){n.clearRect(0,0,i.width,i.height),s.getByteFrequencyData(u);for(var t=0,e=0,o=2*window.devicePixelRatio,c=[],l=[],f=Math.min.apply(Math,u),h=Math.max.apply(Math,u),p=0;e<i.width;p++){t=u[p]*(i.height/250),p<15&&c.push(t/50),l.push(u[p]),t=r.get(f,h,u[p]),t=u[p],n.fillStyle="#fff";var v=i.height-t;v=v>i.height-1?i.height-1:v,v=v<0?0:v,n.fillRect(e,v,o,i.height),e+=2*o}var _=c.reduce(function(t,e){return t+e},0)/c.length*.5;_=_<1?1:_,_=_>3?3:_,d.style.transform="scale("+_+")",a=requestAnimationFrame(this.startVisuals)},stopVisuals:function(){cancelAnimationFrame(a)}},mounted:function(){i=this.$el.querySelector("canvas"),d=document.querySelector(".background"),n=i.getContext("2d"),i.width=i.offsetWidth*window.devicePixelRatio,i.height=i.offsetHeight*window.devicePixelRatio,n.imageSmoothingEnabled=!1,r.max=i.height;var t=new window.AudioContext,e=t.createMediaElementSource(this.audioElement);s=t.createAnalyser(),e.connect(s),s.connect(t.destination),s.fftSize=4096,s.minDecibels=-90,s.maxDecibels=0,o=s.frequencyBinCount,u=new Uint8Array(o)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,r){var i,n;i=r(16);var s=r(70);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,r){var i,n;i=r(17);var s=r(78);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,r){var i,n;i=r(18);var s=r(69);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,r){var i,n;r(57),i=r(22);var s=r(75);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-3e61a67c",t.exports=i},function(t,e,r){var i,n;r(58),i=r(23);var s=r(76);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-4f957212",t.exports=i},function(t,e,r){var i,n;r(53),i=r(24);var s=r(71);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-1632ec32",t.exports=i},function(t,e,r){var i,n;r(56),i=r(25);var s=r(74);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-23eb099c",t.exports=i},function(t,e,r){var i,n;r(54),i=r(20);var s=r(72);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-20219ee9",t.exports=i},function(t,e,r){var i,n;r(59),i=r(21);var s=r(77);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-4fb6a3e9",t.exports=i},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{staticClass:"deezer-embed"},[t.validId?t._h("iframe",{attrs:{scrolling:"no",frameborder:"0",allowTransparency:"true",src:t.src,width:"100%",height:"92"}}):t._e()," ",t.validId?t._e():t._h("service-error",{attrs:{service:"Apple Music"}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{staticClass:"app"},[t._h("SearchBar")," ",t._h("SearchResults")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;return t.search?t._h("div",{staticClass:"search-results"},[t._h("SaoirsePreview",{attrs:{title:t.search.spotify_id}})," ",t._h("section",[t._m(0)," ",t._h("table",[t._m(1)," ",t._h("tbody",[t._h("tr",[t._m(2)," ",t._h("td",[t._s(t.search.tidal_id)])," ",t._h("td",[t._h("a",{attrs:{href:t.tidalUrl,target:"_blank"}},["Play on TIDAL"])])])," ",t._h("tr",[t._m(3)," ",t._h("td",[t._s(t.search.spotify_id)])," ",t._h("td",[t._h("a",{attrs:{href:t.spotifyUrl,target:"_blank"}},["Play on Spotify"])])])," ",t._h("tr",[t._m(4)," ",t._h("td",[t._s(t.search.itunes_id)])," ",t._h("td",[t._h("a",{attrs:{href:t.itunesUrl,target:"_blank"}},["Play on iTunes"])])])," ",t._h("tr",[t._m(5)," ",t._h("td",[t._s(t.search.deezer_id)])," ",t._h("td",[t._h("a",{attrs:{href:t.deezerUrl,target:"_blank"}},["Play on Deezer"])])])," ",t._h("tr",[t._m(6)," ",t._h("td",[t._s(t.search.isrc_id)])," ",t._m(7)])])])])," ",t._h("section",{staticClass:"embeds"},[t._m(8)," ",t._h("AppleMusicEmbed",{attrs:{id:t.search.itunes_id}})," ",t._h("TidalEmbed",{attrs:{id:t.search.tidal_id}})," ",t._h("DeezerEmbed",{attrs:{id:t.search.deezer_id}})," ",t._h("SpotifyEmbed",{attrs:{id:t.search.spotify_id}})])]):t._e()},staticRenderFns:[function(){var t=this;return t._h("header",[t._h("h2",["Track IDs"])])},function(){var t=this;return t._h("thead",[t._h("th")," ",t._h("th",["ID"])," ",t._h("th",["Link"])])},function(){var t=this;return t._h("td",["TIDAL"])},function(){var t=this;return t._h("td",["Spotify"])},function(){var t=this;return t._h("td",["Apple Music / iTunes"])},function(){var t=this;return t._h("td",["Deezer"])},function(){var t=this;return t._h("td",["ISRC"])},function(){var t=this;return t._h("td")},function(){var t=this;return t._h("header",[t._h("h2",["Embeds"])])}]}},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{staticClass:"spotify-embed"},[t.validId?t._h("iframe",{attrs:{src:t.src,width:"100%",height:"80px",frameborder:"0",allowtransparency:"true"}}):t._e()," ",t.validId?t._e():t._h("service-error",{attrs:{service:"Spotify"}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{staticClass:"message"},["\n  Couln't find this track on "+t._s(t.service)+".\n"])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;return t._m(0)},staticRenderFns:[function(){var t=this;return t._h("div",{staticClass:"spectrum"},[t._h("canvas")])}]}},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{class:t.classes},[t._h("div",{staticClass:"progress-bar"},[t._h("div",{staticClass:"bar",style:t.progressStyle})])," ",this.loading?t._h("div",{staticClass:"loader"}):t._e()," ",t._h("figure",{class:t.backgroundClasses,attrs:{tabindex:"-1"}},[t._h("img",{attrs:{src:t.backgroundSrc,alt:"Background image for search result"}})])," ",t._h("div",{staticClass:"center"},[t._h("figure",{staticClass:"cover"},[t._h("img",{attrs:{srcset:t.imageSourceSet,alt:"Image for search result"}})," ",t._h("button",{staticClass:"playback-button",on:{click:t.toggleAudioPlayback}},[t._h("i",{staticClass:"material-icons"},[t._s(t.currentPlayButtonIcon)])])])," ",t._h("div",{staticClass:"metadata"},[t._h("span",{staticClass:"name"},[t._s(t.songName)])," ",t._h("span",{staticClass:"artist"},[t._s(t.artistList)])," "])])," ",t._h("div",{staticClass:"right"},[t._h("Spectrum",{ref:"spectrum",staticClass:"preview-spectrum",attrs:{audioElement:t.audio}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;return t._h("form",{staticClass:"search-form",on:{submit:t.search}},[t._h("div",{staticClass:"row"},[t._m(0)," ",t._h("select",{directives:[{name:"model",rawName:"v-model",value:t.service,expression:"service"}],attrs:{id:"service"},on:{change:function(e){t.service=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[t._l(t.services,function(e){return t._h("option",{domProps:{value:e.value}},[t._s(e.name)])})])])," ",t._h("div",{staticClass:"row"},[t._h("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],attrs:{type:"search",name:"search",placeholder:"Type in track id..."},domProps:{value:t._s(t.id)},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})])," ",t._m(1)])},staticRenderFns:[function(){var t=this;return t._h("label",{attrs:{for:"service"}},["Select service:"])},function(){var t=this;return t._h("div",{staticClass:"row"},[t._h("button",{attrs:{type:"submit"}},["Free the music"])])}]}},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{staticClass:"tidal-embed"},[t._h("iframe",{attrs:{src:t.src,frameborder:"0",allowfullscreen:"true",style:"width:100%;height:181px"}})," ",t.validId?t._e():t._h("ServiceError",{attrs:{service:"Tidal"}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;return t._h("div",{staticClass:"apple-music-embed"},[t.validId?t._h("iframe",{attrs:{src:t.src,height:"110px",width:"100%",frameborder:"0"}}):t._e()," ",t.validId?t._e():t._h("service-error",{attrs:{service:"Apple Music"}})])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.61dc545ce0d48cf8529d.js.map